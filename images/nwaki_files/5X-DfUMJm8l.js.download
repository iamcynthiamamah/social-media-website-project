if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MAnimation",["CSS","MLegacyDataStore","getVendorPrefixedName","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=c("getVendorPrefixedName")("animation-duration");function a(a,b,e){var f=d("MLegacyDataStore").get(a);window.clearTimeout(f.timerEnd);delete f.timerEnd;c("CSS").conditionClass(a,b,!1);c("CSS").conditionClass(a,"accelerate",!0);a.style[h]=e+"ms";f.timerStart=c("setTimeoutAcrossTransitions")(c("CSS").conditionClass.bind(null,a,b,!0),0);f.timerEnd=c("setTimeoutAcrossTransitions")(function(){c("CSS").conditionClass.bind(null,a,b,!1);a.style[h]="";c("CSS").conditionClass(a,"accelerate",!1);var e=d("MLegacyDataStore").get(a);window.clearTimeout(e.timerStart);delete e.timerStart},e)}g.animate=a}),98);
__d("MFriendingActionError",[],(function(a,b,c,d,e,f){a="confirm_incomming_request_error";b="delete_incomming_request_error";c="send_outgoing_request_error";d="cancel_outgoing_request_error";f.CONFIRM_INCOMING_REQUEST_ERROR=a;f.DELETE_INCOMING_REQUEST_ERROR=b;f.SEND_OUTGOING_REQUEST_ERROR=c;f.CANCEL_OUTGOING_REQUEST_ERROR=d}),66);
__d("MFriendingState",[],(function(a,b,c,d,e,f){a="m:friending-state:request-sent";b="m:friending-state:request-canceled";c="m:friending-state:unfriended";f.REQUEST_SENT=a;f.REQUEST_CANCELED=b;f.UNFRIENDED=c}),66);
__d("RegularPymkAddFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744254");c=b("FalcoLoggerInternal").create("regular_pymk_add",a);e.exports=c}),null);
__d("RegularPymkImpFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744255");c=b("FalcoLoggerInternal").create("regular_pymk_imp",a);e.exports=c}),null);
__d("RegularPymkProfileFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744256");c=b("FalcoLoggerInternal").create("regular_pymk_profile",a);e.exports=c}),null);
__d("RegularPymkXoutFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744257");c=b("FalcoLoggerInternal").create("regular_pymk_xout",a);e.exports=c}),null);
__d("MPymkFunnelLogger",["Event","RegularPymkAddFalcoEvent","RegularPymkImpFalcoEvent","RegularPymkProfileFalcoEvent","RegularPymkXoutFalcoEvent","Stratcom"],(function(a,b,c,d,e,f,g){function a(a,b,d){var e=a.getAttribute("data-pymk-id"),f=a.getAttribute("data-pymk-loc"),g=a.getAttribute("data-signature"),i=[];i.push(c("Event").listen(d,"click",function(){e!=null&&h(e,g,f)}));i.push(c("Event").listen(b,"click",function(){e!=null&&h(e,g,f)}));c("Stratcom").listen("m:page:unload",null,function(){c("Stratcom").removeCurrentListener();while(i.length)i.pop().remove()})}function b(a,b,c){i(a,"impression",b,c)}function d(a,b,c){i(a,"hide",b,c)}function h(a,b,c){i(a,"click",b,c)}function e(a,b,c){i(a,"add",b,c)}function i(a,b,d,e){var f;switch(b){case"add":f=c("RegularPymkAddFalcoEvent");break;case"click":f=c("RegularPymkProfileFalcoEvent");break;case"hide":f=c("RegularPymkXoutFalcoEvent");break;case"impression":f=c("RegularPymkImpFalcoEvent");break}f!=null&&f.logCritical(j(a,e,d))}function j(a,b,c){return function(){return{pymk_id:a,pymk_location:b,pymk_signature:c}}}g.listenToProfileClick=a;g.logImpression=b;g.logXOut=d;g.logClick=h;g.logAdd=e;g._logEvent=i}),98);
__d("XWriteCancelFriendRequestController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/a/friendrequest/cancel/",{subject_id:{type:"IntOrPFBID"},cancel_ref:{type:"String"},redirect_uri:{type:"String"},force_redirect:{type:"Bool",defaultValue:!1},friending_list_id:{type:"Int"},show_inline_errors:{type:"Bool",defaultValue:!1},ajax_id:{type:"String"},friending_location:{type:"String"},link_to_profile:{type:"Bool",defaultValue:!0}})}),null);
__d("XWriteRemoveFriendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/a/friends/remove/",{subject_id:{type:"Int"},unfriend_ref:{type:"String"}})}),null);
__d("MAddFriend",["csx","cx","DOM","MAnimation","MFriendingActionError","MFriendingState","MLegacyDataStore","MPageCache","MPageControllerPath","MPymkFunnelLogger","MRequest","MRequestTypes","MURI","Parent","Stratcom","XWriteCancelFriendRequestController","XWriteRemoveFriendController","gkx"],(function(a,b,c,d,e,f,g,h,i){var j="m-add-friend",k="m-cancel-request",l="m-unfriend-request",m="m-unfollow-request",n="m-follow-request",o="check",p="friends",q="/a/mobile/friends/add_friend.php",r="/a/subscriptions/remove",s="/a/subscriptions/add",t=86,u=224;function v(a){a=a.querySelector(".touched_hide");a&&d("MAnimation").animate(a,"_4-ic",500)}function w(){var a=c("MPageControllerPath").getRequestPath();c("MPageCache").removeCachedPage(a);c("MPageCache").clearCachedIUIResponses(a)}function x(a){var b=a.getNode(j),e=a.getNode("m-add-friend-secondary");if(b==null||!(b instanceof HTMLAnchorElement)||e==null)return;var f=d("MLegacyDataStore").get(b),g=d("MLegacyDataStore").get(e);D(a);d("MLegacyDataStore").set(e,{one_click_adding:!0,one_click_cancel_event:null});w();var h={id:f.id,hf:f.hf,sc:f.sc,so:f.so,pl:f.pl,at:f.at,et:f.et,ed:f.ed,fref:f.fref};f.floc&&(h.floc=f.floc);f.el&&(h.el=f.el);var i=c("DOM").find(e,"*",o),k=c("DOM").find(e,"div","m-add-friend-flyout");f=new(c("MURI"))(q);var l=new(c("MURI"))(b.href).getQueryData()._ft_;l&&f.addQueryData({_ft_:l});l=new(c("MURI"))(b.href).getQueryData().__xts__;l&&f.addQueryData({__xts__:l});b=new(c("MRequest"))(f.toString()).setType(d("MRequestTypes").DEPENDENT);b.setData(h);var m=function(){c("DOM").show(i),d("MLegacyDataStore").get(e).bounce&&v(i),c("Stratcom").listen("friending_state_change",null,y.bind(a,h.id,d("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR)),c("Stratcom").invoke(d("MFriendingState").REQUEST_SENT,null,{event:a,userid:h.id})};b.listen("start",function(){d("MLegacyDataStore").set(e,{outgoing_request_pending:!0}),c("DOM").hide(k),m()});b.listen("postprocess",function(a){d("MLegacyDataStore").set(e,{outgoing_request_pending:!1}),g.one_click_adding&&(d("MLegacyDataStore").set(e,{one_click_adding:!1}),g.one_click_cancel_event&&A(g.one_click_cancel_event))});b.send();a.kill()}function y(a,b,e){e=e.getData();if(e.userid!=a)return;if(e.error!=b)return;a=this.getNode("m-add-friend-secondary");if(e.error===d("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR&&a!=null){d("MLegacyDataStore").set(a,{outgoing_request_pending:!1});b=c("DOM").find(a,"*",o);var f=c("DOM").find(a,"div","m-add-friend-flyout");c("DOM").show(f);c("DOM").hide(b);c("Stratcom").invoke(d("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR,null,{event:this})}else if(e.error===d("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR){f=c("DOM").find(a,"a","m-cancel-request");b=c("DOM").find(a,"div","m-add-friend-flyout");c("DOM").show(f);c("DOM").hide(b);c("Stratcom").invoke(d("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR,null,{event:this})}c("Stratcom").removeCurrentListener()}function z(a){var b=d("MLegacyDataStore").get(a.getNode(l)),e=b.flyoutEvent;w();a=e.getNode("undoable-action");a||(a=e.getNode("m-add-friend-secondary"));var f=c("DOM").scry(a,"*",p)[0],g=c("DOM").find(a,"div","m-add-friend-flyout");a=c("XWriteRemoveFriendController").getURIBuilder().getURI();a=new(c("MRequest"))(a);a.setData({friend_id:b.id,noReload:!0,unref:b.unfriend_ref});a.listen("start",function(){c("DOM").hide(f),b.is_deactivated||c("DOM").show(g)});a.listen("done",function(a){if(a==null?void 0:(a=a.payload)==null?void 0:a.success){c("Stratcom").invoke(d("MFriendingState").UNFRIENDED,null,{event:e,userid:b.id});return}b.is_deactivated||c("DOM").hide(g);c("DOM").show(f)});a.send();e.kill()}function A(a){var b=d("MLegacyDataStore").get(a.getNode(k)),e=a.getNode("undoable-action");e||(e=a.getNode("m-add-friend-secondary"));e||(e=b.parentNode);var f=c("DOM").scry(e,"*",o)[0],g=c("DOM").find(e,"*","load"),h=c("DOM").find(e,"div","m-add-friend-flyout");e=a.getNode("m-add-friend-secondary");var i=e?d("MLegacyDataStore").get(e):null;if(G&&i&&i.outgoing_request_pending)return;if(i&&i.one_click_adding){d("MLegacyDataStore").set(e,{one_click_cancel_event:a});c("DOM").hide(f);c("DOM").show(g);return}var j=function(){d("MLegacyDataStore").get(h).not_friendable||c("DOM").show(h),c("Stratcom").invoke(d("MFriendingState").REQUEST_CANCELED,null,{event:a,userid:b.id})};i=c("XWriteCancelFriendRequestController").getURIBuilder().getURI();e=new(c("MRequest"))(i);e.setData({subject_id:b.id,ref_param:b.ref_param,floc:b.floc});c("Stratcom").listen("friending_state_change",null,y.bind(a,b.id,d("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR));e.listen("start",function(){c("DOM").hide(f),c("DOM").show(g)});e.listen("finally",function(){c("DOM").hide(g);j();var b=a.getNode("story-wrap");b&&d("MLegacyDataStore").set(b,{sent:!1})});e.send();a.kill()}function B(a){var b=a.getNode(m);if(b==null)return;b=d("MLegacyDataStore").get(b);var e=new(c("MURI"))(r);e=new(c("MRequest"))(e);var f=a,g=null;try{var h;g=(h=b.flyoutEvent)==null?void 0:h.getNode("popup-action-trigger")}catch(a){g=null}if(g!=null){e.setData({subject_id:b.id,forceredirect:!1,location:t});e.send();d("MLegacyDataStore").set(g,{is_following:!1});a.kill();return}h=f.getNode("m-add-friend-flyout");var i=c("DOM").find(h,"a","m-follow-request"),j=c("DOM").find(h,"a","m-unfollow-request"),k=c("DOM").find(h,"*","load");e.setData({subject_id:b.id,forceredirect:!1,location:u});e.listen("start",function(){c("DOM").hide(j),c("DOM").show(k)});e.listen("finally",function(){c("DOM").hide(k),c("DOM").show(i)});e.send();f.kill()}function C(a){var b=a.getNode(n);if(b==null)return;b=d("MLegacyDataStore").get(b);var e=new(c("MURI"))(s);e=new(c("MRequest"))(e);var f=a,g=null;try{var h;g=(h=b.flyoutEvent)==null?void 0:h.getNode("popup-action-trigger")}catch(a){g=null}if(g!==null){e.setData({subject_id:b.id,forceredirect:!1,location:t});e.send();d("MLegacyDataStore").set(g,{is_following:!0});a.kill();return}h=f.getNode("m-add-friend-flyout");var i=c("DOM").find(h,"a","m-follow-request"),j=c("DOM").find(h,"a","m-unfollow-request"),k=c("DOM").find(h,"*","load");e.setData({subject_id:b.id,forceredirect:!1,location:u});e.listen("start",function(){c("DOM").hide(i),c("DOM").show(k)});e.listen("finally",function(){c("DOM").hide(k),c("DOM").show(j)});e.send();f.kill()}function D(a){a=a.getNode(j);if(!a)return;a=d("Parent").bySelector(a,"._5pxa");if(!a)return;var b=a.getAttribute("data-pymk-id"),c=a.getAttribute("data-pymk-loc");a=a.getAttribute("data-signature");b!=null&&Boolean(b)&&c!=null&&(c==="/find-friends/index.php"||c==="mobile_jewel")&&a!=null&&d("MPymkFunnelLogger").logAdd(b,a,c)}var E=!1,F=!1,G=!1;function a(a){a!=null&&a&&!F&&(F=!0,c("Stratcom").listen("click",m,B),c("Stratcom").listen("click",n,C));if(E)return;E=!0;G=c("gkx")("832605");c("Stratcom").listen("click",j,x);c("Stratcom").listen("click",k,A);c("Stratcom").listen("click",l,z)}g.main=a}),98);
__d("MAddFriendNew",["DOM","MFriendingState","MLegacyDataStore","Stratcom"],(function(a,b,c,d,e,f,g){var h="m-add-friend-flyout",i="m-cancel-request";a=function(a,b,e){var f=this;this.onFriendRequestCanceled=function(a){a=a.getData();if(!a||a.userid!==f.userid)return;a=c("DOM").scry(f.unit,"*",h)[0];var b=c("DOM").scry(f.unit,"*",i)[0];d("MLegacyDataStore").get(a).not_friendable||c("DOM").show(a);c("DOM").hide(b)};this.onFriendRequestSent=function(a){a=a.getData();if(!a||a.userid!==f.userid)return;a=c("DOM").scry(f.unit,"*",h)[0];var b=c("DOM").scry(f.unit,"*",i)[0];c("DOM").hide(a);c("DOM").show(b)};this.unit=e;this.userid=b;c("Stratcom").listen(d("MFriendingState").REQUEST_SENT,null,this.onFriendRequestSent.bind(this));c("Stratcom").listen(d("MFriendingState").REQUEST_CANCELED,null,this.onFriendRequestCanceled.bind(this))};g["default"]=a}),98);
__d("MFriendDynamicSubtitle",["cx","DOM","MAnimation","MFriendingActionError","MFriendingState","MParent","Stratcom"],(function(a,b,c,d,e,f,g,h){var i="undoable-action",j="m-add-friend-request-sent",k="m-friend-request-canceled",l="m-friend-unfriended",m="m-add-friend-source-replaceable",n="m-friend-request-highlight-notice";a=function(){function a(a,b){var e=this;this.$7=function(a){a=a.getData();if(!a||!a.userid||a.userid!=e.$2)return;if(!a.error)return;e.$8(a.error)};this.$5=function(a){var b=a.getData();if(!b||!b.userid||b.userid!=e.$2)return;b=a.getType();e.$8(b)};this.$6=function(){for(var a=0;a<e.$4.length;a++)e.$4[a].remove()};this.$1=a;this.$2=b;this.$3=d("MParent").bySigil(a,i);this.$4=[c("Stratcom").listen([d("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR,d("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR,d("MFriendingState").REQUEST_SENT,d("MFriendingState").REQUEST_CANCELED,d("MFriendingState").UNFRIENDED],null,this.$5.bind(this)),c("Stratcom").listen("m:page:unload",null,this.$6.bind(this)),c("Stratcom").listen("friending_state_change",null,this.$7.bind(this))]}var b=a.prototype;b.$8=function(a){this.$9(),a===d("MFriendingState").REQUEST_SENT||a===d("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR?this.$10(j):a===d("MFriendingState").REQUEST_CANCELED?this.$10(k):a===d("MFriendingState").UNFRIENDED?this.$10(l):a===d("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR&&this.$10(m),this.$11()};b.$9=function(){this.$12(j),this.$12(m),this.$12(k),this.$12(l)};b.$12=function(a){a=c("DOM").scry(this.$3,"*",a)[0];a&&c("DOM").hide(a)};b.$10=function(a){a=c("DOM").scry(this.$3,"*",a)[0];a&&c("DOM").show(a)};b.$11=function(){var a=c("DOM").scry(this.$3,"*",n)[0];a&&d("MAnimation").animate(a,"_4z0z",4e3)};return a}();g["default"]=a}),98);
__d("MFriendingAutoScroll",["MAnimator","MFriendingState","MViewport","Stratcom"],(function(a,b,c,d,e,f,g){var h=400,i=101,j,k,l,m;function a(){o();var a=c("Stratcom").listen("m:page:unload",null,function(){a.remove(),p()})}function n(){var a=d("MViewport").getScrollPos().y,b=function(b){d("MViewport").scrollTo(0,a+b*i)};new(c("MAnimator"))().start(b,null,function(){},h)}function o(){p(!0),j=c("Stratcom").listen([d("MFriendingState").REQUEST_SENT],null,n),k=c("Stratcom").listen("click","confirm-request",n),l=c("Stratcom").listen("click",["nav-popover","feed"],p),m=c("Stratcom").listen("click",["nav-popover","requests","icon"],o)}function p(a){a===void 0&&(a=!1),j&&j.remove(),k&&k.remove(),l&&l.remove(),a===!0&&m&&m.remove()}g.setup=a}),98);
__d("MFriendsActionBubble",["DOM","MLegacyDataStore","MURI","Stratcom"],(function(a,b,c,d,e,f,g){var h="m-unfriend-request",i="/friendlists/edit",j="manage-friend-list",k="m-follow-request",l="m-unfollow-request";a=function(){function a(a){var b=this;this.$3=function(a){var d=b.$1.getContentRoot(),e=a.getNode("popup-action-trigger"),f=c("DOM").scry(d,"*",h)[0];b.$5(e,f,a);f=c("DOM").scry(d,"*",j)[0];b.$5(e,f,a);b.$6(e,d,a)};this.$4=function(a){var e=a.getNode(j);if(e!=null){e=d("MLegacyDataStore").get(e);e=new(c("MURI"))(i).setQueryData({subject_id:e.id,ref_param:e.manage_list_ref});b.$7(e,a)}};this.$1=a;this.$2=null}var b=a.prototype;b.enable=function(){this.$2=[c("Stratcom").listen("click","are-friends-popup",this.$3.bind(this)),c("Stratcom").listen("click",j,this.$4.bind(this))]};b.$6=function(a,b,e){if(a==null)return;var f=d("MLegacyDataStore").get(a).is_following;if(f===null)return;var g=c("DOM").scry(b,"*",l)[0];this.$5(a,g,e);b=c("DOM").scry(b,"*",k)[0];this.$5(a,b,e);f?(c("DOM").show(g),c("DOM").hide(b)):(c("DOM").show(b),c("DOM").hide(g))};b.$5=function(a,b,c){if(!a||!b)return;a=d("MLegacyDataStore").get(a);a.flyoutEvent=c;d("MLegacyDataStore").set(b,a)};b.$7=function(a,b){window.FW_ENABLED||!window.APP_ENABLED?(b.kill(),window.location.href=a.toString()):c("Stratcom").invoke("go",null,{uri:a})};b.disable=function(){while((a=this.$2)==null?void 0:a.length){var a;this.$2.pop().remove()}};return a}();g["default"]=a}),98);
__d("MSwipeInfiniteScrollerLoadMore",["DOM","DataAttributeUtils","MLegacyDataStore"],(function(a,b,c,d,e,f,g){var h=0,i=200;function a(a){if(!a)return;a=document.getElementById(a);if(!a)return;var b=d("MLegacyDataStore").get(a);if(!b||!b.scrollArea)return;var e=c("DOM").scry(a,"*","m-swipe-pymk-item")[0];e=c("DataAttributeUtils").getDataAttribute(e,"data-unit-size");e||(e=i);var f=b.scrollArea;if(f.getAutomaticPaging())f.reflow("auto");else{f=c("DOM").find(a,"*","scroll-area-body").children;a=[h];for(var g=1;g<f.length;g++)a[g]=a[g-1]+parseInt(e,10);b.scrollArea.reflow(a)}}g.reflow=a}),98);
__d("XEgoHideLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/xout/",{ego_id:{type:"Int",required:!0},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0},service_id:{type:"String",required:!0}})}),null);
__d("XFeedEgoImpressionLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/impression/",{})}),null);
__d("XFeedEgoLoadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/load/",{loading_id:{type:"String",required:!0},ids:{type:"IntVector",required:!0},service_id:{type:"String",required:!0},replace_data:{type:"String",defaultValue:""},location:{type:"String",defaultValue:""},group_size:{type:"Int",defaultValue:1},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0}})}),null);
__d("MSwipeInfiniteScroller",["csx","cx","CSS","DOM","DataAttributeUtils","MFriendingState","MLegacyDataStore","MParent","MRequest","MRequestTypes","MScrollAreaHelper","MSwipeInfiniteScrollerLoadMore","MURI","Parent","Stratcom","XEgoHideLoggingController","XFeedEgoImpressionLoggingController","XFeedEgoLoadController"],(function(a,b,c,d,e,f,g,h,i){var j=3,k={};({});function a(a){var b=a.getData().event;if(!b.getNode("m-swipe-pymk-item")&&!b.getNode("m-swipe-pysf-item"))return;var e=b.getTarget(),f=d("MLegacyDataStore").get(e);f._delayTimer&&window.clearTimeout(f._delayTimer);f._delayTimer=window.setTimeout(function(){f.scrollArea===void 0&&(f.scrollArea=d("MScrollAreaHelper").findScrollArea(e,14)),f.scrollArea&&(f.scrollArea.scrollByPages(1),c("Stratcom").invoke("MSwipeInfiniteScroller:autoScrollStart",null,b))},1e3);f._touchstartListener&&f._touchstartListener.remove();f._touchstartListener=c("Stratcom").listen("touchstart",null,function(a){window.clearTimeout(f._delayTimer),delete f._delayTimer,f._touchstartListener.remove(),delete f._touchstartListener});if(b.getNode("m-swipe-pymk-item")){a=d("MParent").bySigil(e,"undoable-action");if(!a)return;a=d("DOM").scry(a,"*","pymk-remove-button")[0];a&&c("CSS").hide(a)}}function b(a){a=a.getData().event;if(!a.getNode("m-swipe-pymk-item"))return;a=a.getTarget();a=d("MParent").bySigil(a,"undoable-action");if(!a)return;a=d("DOM").scry(a,"*","pymk-remove-button")[0];a&&c("CSS").show(a)}function e(a){a=a.getData();var b=a.scrollarea;m(b,a.container)}function l(a){a=JSON.parse(c("DataAttributeUtils").getDataFt(a));if(!a)return;var b=a.ego_id,d=a.qid;a=a.mf_story_key;var e=(d+a).toString();if(!b||k[e]&&k[e][b])return;var f=c("XFeedEgoImpressionLoggingController").getURIBuilder().getURI();new(c("MRequest"))(f).setMethod("POST").setData({ego_id:b,qid:d,mf_story_key:a}).send();k[e]||(k[e]={});k[e][b]=!0}function m(a,b){var c=a.getScrollPageIndex()+1,d=a.getScrollPageCount();c+j>=d&&n(b);c=a.getChildrenOnCurrentPage();for(var d=0;d<c.length;d++)l(c[d])}function n(a){var b=d("DOM").scry(a,"*","m-infinite-swipe-loading")[0];if(!b)return;var e=d("MLegacyDataStore").get(b);if(e.processing)return;d("MLegacyDataStore").set(b,{processing:!0});if(e.use_uri){new(c("MRequest"))(new(c("MURI"))(e.uri).toString()).setType(d("MRequestTypes").DEPENDENT).send();return}e=[];a=a.children;var f,g;for(var h=0;h<a.length;h++){h===0&&(g=a[h].getAttribute("data-service"));var i=c("DataAttributeUtils").getDataFt(a[h]);if(!i)continue;h===0&&(f=JSON.parse(i));i=JSON.parse(i).ego_id;e.push(i)}a=c("XFeedEgoLoadController").getURIBuilder().setString("loading_id",b.id).setIntVector("ids",e).setString("service_id",g||"pymk").setString("location","inline_feed").setInt("qid",(i=f)==null?void 0:i.qid).setInt("mf_story_key",(h=f)==null?void 0:h.mf_story_key).getURI();e=new(c("MRequest"))(new(c("MURI"))(a).toString()).setType(d("MRequestTypes").DEPENDENT);i=function(){var a=d("Parent").bySelector(b,".scrollArea");d("MSwipeInfiniteScrollerLoadMore").reflow(a==null?void 0:a.id);d("MLegacyDataStore").set(b,{processing:!1})};e.listen("done",i);e.send()}function f(a){a=a.getNode("m-swipe-pymi-item");if(!a)return;var b=d("MScrollAreaHelper").findScrollArea(a);if(!b)return;window.setTimeout(function(){b.scrollByPages(1)},500)}function h(a){var b=a.getNode("m-swipe-pymk-item"),e="PYMK";b||(b=a.getNode("m-swipe-pysf-item"),e="PYSF");b||(b=a.getNode("m-swipe-pymi-item"),e="PYMI");if(!b)return;var f=d("MScrollAreaHelper").findScrollArea(b);if(!f)return;a=JSON.parse(c("DataAttributeUtils").getDataFt(b));if(a&&a.ego_id){a=c("XEgoHideLoggingController").getURIBuilder().setInt("ego_id",a.ego_id).setInt("qid",a.qid).setInt("mf_story_key",a.mf_story_key).setString("service_id",e).getURI();new(c("MRequest"))(a).send()}c("CSS").addClass(b,"_3m57");if(!f._canUseHscroll&&!f._isHorizontal){d("DOM").remove(b);return}window.setTimeout(function(){d("DOM").remove(b),d("MSwipeInfiniteScrollerLoadMore").reflow(f._element.id),m(f,f._content)},500);e=f.getScrollPageIndex()+1;a=f.getChildAtPageIndex(e);l(a)}c("Stratcom").listen("MScrollArea:scrollend","infiniteScroller",e);c("Stratcom").listen("click","invite-contact-button",f);c("Stratcom").listen(d("MFriendingState").REQUEST_SENT,null,a);c("Stratcom").listen(d("MFriendingState").REQUEST_CANCELED,null,b);c("Stratcom").listen("click","m-swipe-xout",h);g.logImpressionForElement=l}),98);
__d("MSwipeFirstUnitImpression",["MLegacyDataStore","MSwipeInfiniteScroller","MViewport","Stratcom","Vector"],(function(a,b,c,d,e,f,g){function a(a,b){if(b){a=d("MLegacyDataStore").get(b);if(a&&a.scrollArea)h(a.scrollArea);else var e=c("Stratcom").listen("MScrollArea:create",null,function(a){a.getData().element.getAttribute("id")===b.id&&(h(a.getData().scrollarea),e&&e.remove())})}}var h=function(a){var b=a.getElement();if(i(b))j(a);else var d=c("Stratcom").listen("scroll",null,function(){i(b)&&(j(a),d&&d.remove())})},i=function(a){var b=d("MViewport").getHeight()+d("MViewport").getScrollTop(),e=a.clientHeight;a=c("Vector").getElementPosition(a).y;a=a+e;return a&&b>=a},j=function(a){var b=a.getChildAtPageIndex(0);b=Math.min(Math.floor(a.getElement().offsetWidth/b.offsetWidth),a.getNumChildren());for(var c=0;c<b;c++)d("MSwipeInfiniteScroller").logImpressionForElement(a.getChildAtPageIndex(c))};g.setup=a}),98);